<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pine Grove Gatherings</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Roboto:wght@300&display=swap" rel="stylesheet">
</head>
<body>
    <form id="password-form">
        <input type="password" id="password-input" placeholder="Enter Password">
        <button type="submit">Submit</button>
        <p id="password-error"></p>
    </form>
    <main id="main-content" style="display: none;">
        <header>
            <img src="images/banner.jpg" alt="Cozy Dinner" class="banner">
            <h1>Pine Grove Gatherings</h1>
            <nav>
                <a href="upcoming.html">Upcoming Events</a>
                <a href="admin.html" class="admin-link">Admin (Private)</a>
                <a href="gallery.html">Picture Gallery</a>
            </nav>
        </header>
        <main>
            <section id="event-details">
                <h2>Next Event: Dinner Party</h2>
                <div class="event-card">
                    <img src="images/event1.jpg" alt="Dinner Party" class="event-img">
                    <div class="event-content">
                        <p><strong>Date & Time:</strong> Saturday, August 23, 2025, 6:00 PM</p>
                        <p><strong>Menu:</strong></p>
                        <ul>
                            <li>Appetizers: Cheese platter, Veggie dips</li>
                            <li>Main: Grilled salmon, Roasted veggies</li>
                            <li>Dessert: Chocolate mousse</li>
                        </ul>
                        <p><strong>What to Bring:</strong> BYOB or a dessert to share.</p>
                        <p><strong>Schedule:</strong></p>
                        <ul>
                            <li>6:00 PM: Arrival & Mingling</li>
                            <li>7:00 PM: Dinner</li>
                            <li>9:00 PM: Games or Chill</li>
                        </ul>
                    </div>
                </div>
            </section>
            <section id="rsvp">
                <h2>RSVP for Dinner Party</h2>
                <form id="rsvp-form">
                    <label for="name">Name:</label>
                    <input type="text" id="name" required>
                    <label for="phone">Phone Number:</label>
                    <input type="tel" id="phone" required>
                    <label for="attending">Attending?</label>
                    <select id="attending" required>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                        <option value="Maybe">Maybe</option>
                    </select>
                    <label for="guests">Number of Guests:</label>
                    <input type="number" id="guests" min="0" value="1">
                    <label for="notes">Dietary Notes:</label>
                    <textarea id="notes"></textarea>
                    <button type="submit">Submit RSVP</button>
                </form>
                <p id="form-message"></p>
            </section>
            <section id="guest-list-request">
                <h2>Request Guest List</h2>
                <p>Want to see who's coming? Submit your phone number below, and we'll send you the current guest list.</p>
                <form id="guest-list-form" style="display: none;">
                    <label for="request-phone">Phone Number:</label>
                    <input type="tel" id="request-phone" required>
                    <button type="submit">Submit Request</button>
                </form>
                <button onclick="document.getElementById('guest-list-form').style.display='block'; this.style.display='none';">Request Guest List</button>
                <p id="request-message"></p>
            </section>
        </main>
        <footer>
            <p>Private event | Questions? Text [Your Name] at [Your Number]</p>
        </footer>
    </main>
    <!-- <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "your-api-key",
            authDomain: "piveevents.firebaseapp.com",
            projectId: "piveevents",
            storageBucket: "piveevents.firebasestorage.app",
            messagingSenderId: "your-messaging-sender-id",
            appId: "your-app-id"
        };
        firebase.initializeApp(firebaseConfig);
    </script>
    <script src="script-common.js"></script>
    <script src="script.js"></script> -->

<!-- Firebase v8 SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDrunOzCIlX9iqYEhpWGqDlN8sUBaF44po",
            authDomain: "piveevents.firebaseapp.com",
            projectId: "piveevents",
            storageBucket: "piveevents.firebasestorage.app",
            messagingSenderId: "635106763509",
            appId: "1:635106763509:web:1f18f4e10da36177f0dbbc",
            measurementId: "G-2VW032KXE8"
        };

        firebase.initializeApp(firebaseConfig);
    </script>
    <script src="script-common.js"></script>
    <script src="script.js"></script>
<script>
document.getElementById('password-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const password = document.getElementById('password-input').value;
    const correctPassword = 'FriendsOnly2025';
    const errorEl = document.getElementById('password-error');
    if (password === correctPassword) {
        sessionStorage.setItem('authenticated', 'true');
        document.getElementById('password-form').style.display = 'none';
        document.getElementById('main-content').style.display = 'block';
    } else {
        errorEl.textContent = 'Incorrect password. Try again.';
        errorEl.style.color = 'red';
    }
});

document.getElementById('rsvp-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const name = document.getElementById('rsvp-name').value;
    const phone = document.getElementById('rsvp-phone').value;
    const attending = document.querySelector('input[name="attending"]:checked')?.value || '';
    const guests = parseInt(document.getElementById('rsvp-guests').value) || 0;
    const notes = document.getElementById('rsvp-notes').value;
    const messageEl = document.getElementById('rsvp-message');

    try {
        await firebase.firestore().collection('rsvps-dinner-party').add({
            name: name || 'Unknown',
            phone,
            attending,
            guests,
            notes,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });
        messageEl.textContent = 'RSVP submitted!';
        messageEl.style.color = 'green';
        document.getElementById('rsvp-form').reset();
    } catch (error) {
        console.error('RSVP error:', error);
        messageEl.textContent = `Error submitting RSVP: ${error.message}`;
        messageEl.style.color = 'red';
    }
});

document.getElementById('guest-list-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const phone = document.getElementById('guest-list-phone').value;
    const messageEl = document.getElementById('guest-list-message');

    try {
        await firebase.firestore().collection('guest-list-requests').add({
            phone,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });
        messageEl.textContent = 'Guest list request submitted!';
        messageEl.style.color = 'green';
        document.getElementById('guest-list-form').reset();
    } catch (error) {
        console.error('Guest list request error:', error);
        messageEl.textContent = `Error submitting request: ${error.message}`;
        messageEl.style.color = 'red';
    }
});

document.addEventListener('DOMContentLoaded', () => {
    if (sessionStorage.getItem('authenticated') === 'true') {
        document.getElementById('password-form').style.display = 'none';
        document.getElementById('main-content').style.display = 'block';
    }
});
</script>
</body>
</html>